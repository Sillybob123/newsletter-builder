<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newsletter Forge - Professional Email Builder</title>
    <meta name="description" content="Create professional newsletters with ease using our drag-and-drop email builder.">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/builder.css">
    <link rel="stylesheet" href="css/email.css">
</head>
<body>
    <div class="app-container">
        <div class="top-bar">
            <div class="logo">
                <i class="fas fa-magic"></i>
                Newsletter Forge
            </div>
            
            <div class="toolbar">
                <button class="btn btn-icon" id="undo-btn" title="Undo (Ctrl+Z)" disabled>
                    <i class="fas fa-undo"></i>
                </button>
                <button class="btn btn-icon" id="redo-btn" title="Redo (Ctrl+Y)" disabled>
                    <i class="fas fa-redo"></i>
                </button>
                
                <div class="toolbar-divider"></div>
                
                <div class="autosave-indicator" id="autosave-status">
                    <i class="fas fa-check-circle"></i>
                    Saved
                </div>
                
                <div class="toolbar-divider"></div>
                
                <button class="btn" id="templates-btn" title="Manage Templates">
                    <i class="fas fa-folder"></i>
                    Templates
                </button>
                
                <button class="btn" id="spam-check-btn" title="Check for Spam Issues">
                    <i class="fas fa-shield-alt"></i>
                    Spam Check
                </button>
                
                <button class="btn" id="dark-mode-btn" title="Toggle Dark Mode (Ctrl+D)">
                    <i class="fas fa-moon"></i>
                    Dark
                </button>
                
                <div class="toolbar-divider"></div>
                
                <button class="btn" id="preview-btn" title="Preview Newsletter (Ctrl+P)">
                    <i class="fas fa-eye"></i>
                    Preview
                </button>
                
                <button class="btn btn-primary" id="export-btn" title="Export HTML (Ctrl+E)">
                    <i class="fas fa-download"></i>
                    Export HTML
                </button>
            </div>
        </div>

        <div class="main-content">
            <div class="left-sidebar">
                <div class="sidebar-tabs">
                    <button class="sidebar-tab active" data-tab="content">
                        <i class="fas fa-plus-circle"></i>
                        Content
                    </button>
                    <button class="sidebar-tab" data-tab="design">
                        <i class="fas fa-palette"></i>
                        Design
                    </button>
                </div>
                
                <div class="sidebar-content">
                    <div id="content-tab" class="tab-content active">
                        <div class="block-category">
                            <h3><i class="fas fa-cube"></i> Basic Blocks</h3>
                            <div class="block-grid">
                                <div class="content-block-btn" draggable="true" data-block="text" title="Add text content">
                                    <i class="fas fa-paragraph"></i>
                                    <span>Text</span>
                                </div>
                                <div class="content-block-btn" draggable="true" data-block="heading" title="Add heading">
                                    <i class="fas fa-heading"></i>
                                    <span>Heading</span>
                                </div>
                                <div class="content-block-btn" draggable="true" data-block="image" title="Add image">
                                    <i class="fas fa-image"></i>
                                    <span>Image</span>
                                </div>
                                <div class="content-block-btn" draggable="true" data-block="button" title="Add call-to-action button">
                                    <i class="fas fa-mouse-pointer"></i>
                                    <span>Button</span>
                                </div>
                                <div class="content-block-btn" draggable="true" data-block="divider" title="Add divider line">
                                    <i class="fas fa-grip-lines"></i>
                                    <span>Divider</span>
                                </div>
                                <div class="content-block-btn" draggable="true" data-block="spacer" title="Add spacing">
                                    <i class="fas fa-arrows-alt-v"></i>
                                    <span>Spacer</span>
                                </div>
                            </div>
                        </div>

                        <div class="block-category">
                            <h3><i class="fas fa-star"></i> Advanced Blocks</h3>
                            <div class="block-grid">
                                <div class="content-block-btn" draggable="true" data-block="boxedText" title="Add styled text box">
                                    <i class="fas fa-square"></i>
                                    <span>Boxed Text</span>
                                </div>
                                <div class="content-block-btn" draggable="true" data-block="imageText" title="Add image with text">
                                    <i class="fas fa-id-card"></i>
                                    <span>Image + Text</span>
                                </div>
                                <div class="content-block-btn" draggable="true" data-block="imageGroup" title="Add image gallery">
                                    <i class="fas fa-images"></i>
                                    <span>Image Group</span>
                                </div>
                                <div class="content-block-btn" draggable="true" data-block="video" title="Add video">
                                    <i class="fas fa-play"></i>
                                    <span>Video</span>
                                </div>
                                <div class="content-block-btn" draggable="true" data-block="code" title="Add custom HTML">
                                    <i class="fas fa-code"></i>
                                    <span>HTML Code</span>
                                </div>
                                <div class="content-block-btn" draggable="true" data-block="social" title="Add social media links">
                                    <i class="fas fa-share-alt"></i>
                                    <span>Social Follow</span>
                                </div>
                            </div>
                        </div>

                        <div class="block-category">
                            <h3><i class="fas fa-th-large"></i> Layout Blocks</h3>
                            <div class="block-grid">
                                <div class="content-block-btn" draggable="true" data-block="columns2" title="Add two-column layout">
                                    <i class="fas fa-columns"></i>
                                    <span>2 Columns</span>
                                </div>
                                <div class="content-block-btn" draggable="true" data-block="columns3" title="Add three-column layout">
                                    <i class="fas fa-th-large"></i>
                                    <span>3 Columns</span>
                                </div>
                                <div class="content-block-btn" draggable="true" data-block="header" title="Add newsletter header">
                                    <i class="fas fa-window-maximize"></i>
                                    <span>Header</span>
                                </div>
                                <div class="content-block-btn" draggable="true" data-block="footer" title="Add newsletter footer">
                                    <i class="fas fa-copyright"></i>
                                    <span>Footer</span>
                                </div>
                            </div>
                        </div>

                        <div class="block-category">
                            <h3><i class="fas fa-puzzle-piece"></i> Special Blocks</h3>
                            <div class="block-grid">
                                <div class="content-block-btn" draggable="true" data-block="article" title="Add article layout">
                                    <i class="fas fa-newspaper"></i>
                                    <span>Article</span>
                                </div>
                                <div class="content-block-btn" draggable="true" data-block="brainTeaser" title="Add brain teaser">
                                    <i class="fas fa-brain"></i>
                                    <span>Brain Teaser</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="design-tab" class="tab-content" style="display: none;">
                        <div class="block-category">
                            <h3><i class="fas fa-globe"></i> Global Styles</h3>
                            <div class="property-group">
                                <label for="global-font">
                                    <i class="fas fa-font"></i>
                                    Font Family
                                </label>
                                <select id="global-font">
                                    <option value="Inter, sans-serif">Inter (Modern)</option>
                                    <option value="Georgia, serif">Georgia (Classic)</option>
                                    <option value="Arial, sans-serif">Arial (Universal)</option>
                                    <option value="Helvetica, sans-serif">Helvetica (Clean)</option>
                                    <option value="Times New Roman, serif">Times New Roman</option>
                                    <option value="Verdana, sans-serif">Verdana</option>
                                </select>
                            </div>
                            <div class="property-group">
                                <label>
                                    <i class="fas fa-palette"></i>
                                    Primary Color
                                </label>
                                <div class="color-input-group">
                                    <input type="color" id="primary-color" value="#007bff" title="Choose primary color">
                                    <input type="text" id="primary-color-text" value="#007bff" placeholder="#007bff">
                                </div>
                            </div>
                            <div class="property-group">
                                <label>
                                    <i class="fas fa-fill-drip"></i>
                                    Background Color
                                </label>
                                <div class="color-input-group">
                                    <input type="color" id="bg-color" value="#ffffff" title="Choose background color">
                                    <input type="text" id="bg-color-text" value="#ffffff" placeholder="#ffffff">
                                </div>
                            </div>
                        </div>

                        <div class="block-category">
                            <h3><i class="fas fa-magic"></i> Quick Actions</h3>
                            <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                                <button class="btn" onclick="newsletterForge.clearCanvas()" style="width: 100%;">
                                    <i class="fas fa-trash"></i>
                                    Clear All
                                </button>
                                <button class="btn" onclick="newsletterForge.save()" style="width: 100%;">
                                    <i class="fas fa-save"></i>
                                    Save Template
                                </button>
                                <button class="btn" onclick="newsletterForge.showTemplates()" style="width: 100%;">
                                    <i class="fas fa-folder-open"></i>
                                    Load Template
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="canvas-container">
                <div class="canvas-header">
                    <h2 id="newsletter-title">Untitled Newsletter</h2>
                    <div class="canvas-tools">
                        <button class="btn btn-icon" id="mobile-preview" title="Mobile Preview">
                            <i class="fas fa-mobile-alt"></i>
                        </button>
                        <button class="btn btn-icon btn-primary" id="desktop-preview" title="Desktop Preview">
                            <i class="fas fa-desktop"></i>
                        </button>
                        <button class="btn" id="clear-canvas" title="Clear all content">
                            <i class="fas fa-trash"></i>
                            Clear
                        </button>
                    </div>
                </div>
                
                <div class="canvas-content" id="canvas-content">
                    <div class="email-canvas" id="email-canvas">
                        <div class="canvas-empty-state">
                            <i class="fas fa-mouse-pointer"></i>
                            <h3>Start Building Your Newsletter</h3>
                            <p>Drag content blocks from the left sidebar to get started, or choose from our templates.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="right-sidebar">
                <div class="properties-header">
                    <i class="fas fa-cog"></i>
                    Block Properties
                </div>
                
                <div class="properties-content" id="properties-content">
                    <div style="text-align: center; color: var(--secondary); margin-top: 2rem;">
                        <i class="fas fa-hand-pointer" style="font-size: 2rem; opacity: 0.5; margin-bottom: 1rem;"></i>
                        <p>Select a block to edit its properties</p>
                        <div style="margin-top: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; border-left: 4px solid var(--primary);">
                            <h4 style="margin: 0 0 0.5rem 0; color: var(--primary);">Pro Tips</h4>
                            <ul style="text-align: left; font-size: 0.875rem; color: var(--secondary); margin: 0; padding-left: 1rem;">
                                <li>Drag blocks from the sidebar to add content</li>
                                <li>Click any block to customize its properties</li>
                                <li>Use Ctrl+Z/Y for undo/redo</li>
                                <li>Press Delete to remove selected blocks</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Templates Modal -->
    <div class="modal" id="templates-modal">
        <div class="modal-content" style="width: 600px; height: auto; max-height: 80vh;">
            <div class="modal-header">
                <h2><i class="fas fa-folder"></i> Newsletter Templates</h2>
                <button class="modal-close" onclick="closeModal('templates-modal')" aria-label="Close modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <ul id="template-list"></ul>
                <div class="toolbar" style="margin-top: 1rem; justify-content: flex-end; gap: 0.5rem;">
                    <button class="btn" id="new-template-btn" title="Create new template">
                        <i class="fas fa-plus"></i> New Template
                    </button>
                    <button class="btn btn-primary" id="save-template-btn" title="Save current newsletter as template">
                        <i class="fas fa-save"></i> Save Current
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Preview Modal -->
    <div class="modal" id="preview-modal">
        <div class="modal-content" style="width: 95vw; height: 90vh;">
            <div class="modal-header">
                <h2><i class="fas fa-eye"></i> Newsletter Preview</h2>
                <button class="modal-close" onclick="closeModal('preview-modal')" aria-label="Close preview">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="preview-tabs">
                    <button class="preview-tab active" data-preview="desktop">
                        <i class="fas fa-desktop"></i> Desktop
                    </button>
                    <button class="preview-tab" data-preview="mobile">
                        <i class="fas fa-mobile-alt"></i> Mobile
                    </button>
                    <button class="preview-tab" data-preview="dark">
                        <i class="fas fa-moon"></i> Dark Mode
                    </button>
                </div>
                <div class="preview-content" id="preview-content"></div>
            </div>
        </div>
    </div>

    <!-- Spam Check Modal -->
    <div class="modal" id="spam-modal">
        <div class="modal-content" style="width: 700px; height: auto; max-height: 80vh;">
            <div class="modal-header">
                <h2><i class="fas fa-shield-alt"></i> Spam Check Report</h2>
                <button class="modal-close" onclick="closeModal('spam-modal')" aria-label="Close spam report">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="spam-report"></div>
        </div>
    </div>

    <!-- Loading Indicator -->
    <div id="loading-indicator" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 10000; background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);">
        <div style="text-align: center;">
            <i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: var(--primary); margin-bottom: 1rem;"></i>
            <p style="margin: 0; color: var(--dark);">Loading...</p>
        </div>
    </div>

    <!-- Scripts -->
<script src="js/templates.js"></script>
    <script src="js/export.js"></script>
    <script src="js/builder.js"></script>

    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js').then(function(registration) {
                    console.log('ServiceWorker registration successful');
                }, function(err) {
                    console.log('ServiceWorker registration failed');
                });
            });
        }
    </script>
</body>
</html>